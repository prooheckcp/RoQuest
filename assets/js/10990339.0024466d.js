"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7213],{92630:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"DataStore","title":"\ud83d\udcbe How to save to DataStore","description":"Most developers will want to connect their Quest System to a data store in order to save/load their data.","source":"@site/docs/DataStore.md","sourceDirName":".","slug":"/DataStore","permalink":"/RoQuest/docs/DataStore","draft":false,"unlisted":false,"editUrl":"https://github.com/prooheckcp/RoQuest/edit/master/docs/DataStore.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"sidebar_label":"\ud83d\udcbe How to save to DataStore"},"sidebar":"defaultSidebar","previous":{"title":"\u267b\ufe0f Creating LifeCycle","permalink":"/RoQuest/docs/LifeCycles/CreatingLifeCycle"},"next":{"title":"\ud83d\udeab Disable Quests","permalink":"/RoQuest/docs/Tips/DisableQuests"}}');var n=a(74848),o=a(28453);const s={sidebar_position:10,sidebar_label:"\ud83d\udcbe How to save to DataStore"},l="\ud83d\udcbe How to save to DataStore",i={},c=[{value:"\ud83d\udd0d Native DataStore",id:"-native-datastore",level:2},{value:"\ud83d\udd0d ProfileService",id:"-profileservice",level:2}];function d(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"-how-to-save-to-datastore",children:"\ud83d\udcbe How to save to DataStore"})}),"\n",(0,n.jsx)(t.p,{children:"Most developers will want to connect their Quest System to a data store in order to save/load their data."}),"\n",(0,n.jsx)(t.p,{children:"Here you can find some examples on how to do it"}),"\n",(0,n.jsx)(t.h2,{id:"-native-datastore",children:"\ud83d\udd0d Native DataStore"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-lua",children:'-- main.lua\nlocal ReplicatedStorage = game:GetService("ReplicatedStorage")\nlocal DataStoreService = game:GetService("DataStoreService")\nlocal Players = game:GetService("Players")\n\nlocal RoQuest = require(ReplicatedStorage.RoQuest).Server\n\nlocal questsStore = DataStoreService:GetDataStore("PlayerQuests")\n\nRoQuest:Init(RoQuest:LoadDirectory(ReplicatedStorage.Quests))\n\nlocal function playerAdded(player: Player)\n\tlocal success, playerData = pcall(function()\n\t\treturn questsStore:GetAsync("player_"..player.UserId)\n\tend)\n\t\n\n\tif playerData then -- Set the data on RoQuest\n\t\tRoQuest:SetPlayerData(player, playerData)\n\tend\nend\n\nlocal function playerRemoved(player: Player)\n\tlocal success, errorMessage = pcall(function()\n\t\tquestsStore:SetAsync("player_"..player.UserId, RoQuest:GetPlayerData(player))\n\tend)\n\t\n\tif not success then\n\t\tprint(errorMessage)\n\tend\nend\n\nRoQuest.OnStart():andThen(function()\n\tPlayers.PlayerAdded:Connect(playerAdded)\n\t\n\tfor _, player: Player in Players:GetPlayers() do\n\t\tplayerAdded(player)\n\tend\n\t\n\tPlayers.PlayerRemoving:Connect(playerRemoved)\nend)\n'})}),"\n",(0,n.jsx)(t.h2,{id:"-profileservice",children:"\ud83d\udd0d ProfileService"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-lua",children:'    local ProfileStore = ProfileService.GetProfileStore("RandomKey", {})\n    local profile = ProfileStore:LoadProfileAsync("USER_"..userId)\n\n    if not profile.Data then\n        profile.Data = {}\n    end\n\n    if not playerData.Data.PlayerQuestData then -- New player, create new quest data\n        playerData.Data.PlayerQuestData = PlayerQuestData {}\n    end\n\n    -- Since RoQuest stores the player data as a pointer we don\'t need to update anymore. Once the profile gets released it will automatically safe the player data with it\n    RoQuest:SetPlayerData(player, playerData.Data.PlayerQuestData)\n'})})]})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},28453:(e,t,a)=>{a.d(t,{R:()=>s,x:()=>l});var r=a(96540);const n={},o=r.createContext(n);function s(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);